{% extends "ggchat/base.html" %}

{% block head %}
    {% load chart %}
    {% chart_load_js %}
{% endblock %}

{% block page_title %}
    Немного про деньги
{% endblock %}

{% block main %}

    <div class="row">

{#        <div class="col-md-6 col-sm-12">#}
{#            <h4>Число людей на стриме</h4>#}
{#            <div id="chart_people"></div>#}
{#            {% chart_datetime "chart_people" chart_people %}#}
{#        </div>#}

        <div class="col-md-6 col-sm-12">
            <h4>Общий донат за неделю</h4>
            <div id="chart_donate_total"></div>
            {% chart_datetime "chart_donate_total" chart_donate_total %}
        </div>

        <div class="col-md-6 col-sm-12">
            <h4>Топ стримеров за неделю</h4>

            <div class="table-responsive">
                <table class="table table-bordered table-hover table-striped">
                    <thead>
                    <tr>
                        <th>Канал</th><th>Сумма за неделю, руб.</th>
                    </tr>
                    </thead>
                    <tbody>
                    {% for donate in donate_top_per_channel %}
                        <tr>
                            <td><a href="{% url 'channel' donate.channel_id %}"> {{ donate.username }}</a></td>
                            <td>{{ donate.amount }}</td>
                        </tr>
                    {% endfor %}
                    </tbody>
                </table>
            </div>

        </div>

    </div>

    <div class="row">
        {# common_prems #}
        <div class="col-md-6 col-sm-12">
            <h4>Недлополученная прибыль от общих премов</h4>

            <div class="table-responsive">
                <table class="table table-bordered table-hover table-striped">
                    <thead>
                    <tr>
                        <th>Канал</th><th>Сумма за неделю, руб.</th>
                    </tr>
                    </thead>
                    <tbody>
                    {% for common in common_prems %}
                        <tr>
                            <td><a href="{% url 'channel' common.channel_id %}"> {{ common.channel__streamer__username }}</a></td>
                            <td>{{ common.sum|floatformat:0 }}</td>
                        </tr>
                    {% endfor %}
                    </tbody>
                </table>
            </div>
        </div>

    </div>


{% endblock %}





{#            <div class="col-md-8 col-sm-12">#}
{#                <h4>Последние донаты</h4>#}
{#                <div class="table-responsive">#}
{#                    <table class="table table-bordered table-hover table-striped">#}
{#                        <thead>#}
{#                        <tr><th>Дата</th><th>Пользователь</th><th>Сумма</th><th>Сообщение</th></tr>#}
{#                        </thead>#}
{#                        <tbody>#}
{#                        {% for donation in donations %}#}
{#                            <tr>#}
{#                            <td>{{ donation.timestamp }}</td>#}
{#                            <td>#}
{#                                {% if donation.user.username %}#}
{#                                    <a href="/user/{{ donation.user_id }}">{{ donation.user.username }}</a>#}
{#                                {% else %}#}
{#                                    <a href="/user/{{  donation.user_id }}">{{ donation.user_id }}</a>#}
{#                                {% endif %}#}
{#                            </td>#}
{#                            <td>{{ donation.amount }}</td>#}
{#                            <td>{{ donation.text }}</td>#}
{#                            </tr>#}
{#                        {% endfor %}#}
{#                        </tbody>#}
{#                    </table>#}
{#                </div>#}
{#            </div>#}
{#            <div class="col-md-4 col-sm-12">#}
{#                <h4>Последние активированные премиумы</h4>#}
{#                <div class="table-responsive">#}
{#                    <table class="table table-bordered table-hover table-striped">#}
{#                        <thead>#}
{#                        <tr><th>Дата</th><th>Пользователь</th><th>Стрик ресабов</th></tr>#}
{#                        </thead>#}
{#                        <tbody>#}
{#                        {% for premium in premiums %}#}
{#                            <tr>#}
{#                            <td>{{ premium.timestamp }}</td>#}
{#                            <td><a href="/user/{{ premium.user_id }}">{{ premium.user.username }}</a></td>#}
{#                            <td>{{ premium.resubs }}</td>#}
{#                            </tr>#}
{#                        {% endfor %}#}
{#                        </tbody>#}
{#                    </table>#}
{#                </div>#}
{#            </div>#}
{#        </div>#}
{##}
{##}
{#        <div class="row">#}
{#            <div class="col-md-6 col-sm-12">#}
{#                <h4>Число людей на стриме</h4>#}
{#                <div id="chart_people"></div>#}
{#                {% chart_datetime "chart_people" chart_people %}#}
{#            </div>#}
{#            <div class="col-md-6 col-sm-12">#}
{#                <h4>Донат за неделю</h4>#}
{#                <div id="chart_income"></div>#}
{#                {% chart_datetime "chart_income" chart_income %}#}
{#            </div>#}
{#        </div>#}
{##}
        {# row 2 #}
{#        <div class="row">#}
{#            <div class="col-md-8 col-sm-12">#}
{#                <h4>Последние сообщения</h4>#}
{#                <div class="table-responsive">#}
{#                    <table class="table table-bordered table-hover table-striped">#}
{#                        <thead>#}
{#                        <tr><th>Дата</th><th>Пользователь</th><th>Сообщение</th></tr>#}
{#                        </thead>#}
{#                        <tbody>#}
{#                        {% for message in messages %}#}
{#                            <tr>#}
{#                            <td>{{ message.timestamp }}</td>#}
{#                                <td><a href="/user/{{ message.user_id }}">{{ message.user.username }}</a></td>#}
{#                            <td>{{ message.text }}</td>#}
{#                            </tr>#}
{#                        {% endfor %}#}
{#                        </tbody>#}
{#                    </table>#}
{#                </div>#}
{#            </div>#}
{#            <div class="col-md-4 col-sm-12">#}
{#                <h4>Последние подписки на канал</h4>#}
{#                <div class="table-responsive">#}
{#                    <table class="table table-bordered table-hover table-striped">#}
{#                        <thead>#}
{#                        <tr><th>Дата</th><th>Пользователь</th></tr>#}
{#                        </thead>#}
{#                        <tbody>#}
{#                        {% for follow in follows %}#}
{#                            <tr>#}
{#                            <td>{{ follow.timestamp }}</td>#}
{#                                <td><a href="/user/{{ follow.user_id }}">{{ follow.user.username }}</a></td>#}
{#                            </tr>#}
{#                        {% endfor %}#}
{#                        </tbody>#}
{#                    </table>#}
{#                </div>#}
{#            </div>#}
{#        </div>#}

        {# row 3 #}
{#        <div class="row">#}
{#            <div class="col-md-8 col-sm-12">#}
{#                <h4>Активные премиумы</h4>#}
{#                <div class="table-responsive">#}
{#                    <table class="table table-bordered table-hover table-striped">#}
{#                        <thead>#}
{#                        <tr><th>Дата</th><th>Пользователь</th><th>Стрик ресабов</th></tr>#}
{#                        </thead>#}
{#                        <tbody>#}
{#                        {% for premium in active_premiums %}#}
{#                            <tr>#}
{#                            <td>{{ premium.started }}</td>#}
{#                            <td>{% if premium.user.username %}#}
{#                                    <a href="/user/{{ premium.user_id }}">{{ premium.user.username }}</a>#}
{#                                {% elif premium.channel_id == "0" %}#}
{#                                    Общий премиум#}
{#                                {% else %}#}
{#                                    <a href="/user/{{ premium.user_id }}">{{ premium.user_id }}</a>#}
{#                                {% endif %}#}
{#                            </td>#}
{#                            <td>{{ premium.resubs }}</td>#}
{#                            </tr>#}
{#                        {% endfor %}#}
{#                        </tbody>#}
{#                    </table>#}
{#                </div>#}
{##}
{#            </div>#}
{#            <div class="col-md-4 col-sm-12">#}
{##}
{#            </div>#}





